快速入门 { .text-center }
-------

&nbsp;

### 试用填密语公众号

第一步：用户先关注微信公众号 “填密语”，不妨在微信中搜索 “填密语”，找到并成功关注后，系统将自动创建两个房间：“GPT” 与 “中英互译”。用户在公众号中点 “主页” 及 “配置” 按钮，系统将跳至指导初学者如何使用的页面。

第二步：进入本公众号的 “GPT” 房间，将如下二维码拍照（如果当前您正用手机访问本网页，将如下二维码截屏也是可以的），然后把照片（或截屏）在公众号（当前 GPT 房间）中发送给后台，系统旋即导入 room 定义。

![旅游服务二维码](res/prompt_sample.gif)

第三步，在公众号中输入 "？"，您将发现 “可换房间” 列表多了一项 “旅游服务” ，这正是上面二维码指向的 room 定义。切换到这个新增的房间后，输入 "介绍 广东梁启超故居"，chatGPT 将立即返回一段关于 “梁启超故居” 景点的介绍文字。

上面发送二维码的实质是，将定义某聊天室 room 的一个 URL 地址提交到公众号后台，接下来后台从指定 URL 拉取以 json 格式定义的聊天室规格 。

&nbsp;

### 自定义聊天室

下文介绍如何自定义一间可在填密语公众号中使用的聊天室，拿上面介绍的 “旅游服务” 举例。

先讲最简情形，比方，如何用户只查询某景点的扼要介绍，定义 room 如下：

``` json
{
  "room_ver": 1,
  "room_name": "旅游服务",
  
  "system_role": "你是一个友善的导游",
  "magic_rules": {
    "介绍":[["景点名","replace","{where}"]]
  },
  "prompts": {
    "介绍":{"ask":"我提供一个景点名称，你将介绍该景点的特色、人文背景、历史典故，简短些。请介绍景点：{where} 。"}
  },
  "hint_magics": ["介绍"]
}
```

这里，room_ver 是填密语公众号要求的 room 规格版本号，当前固定填 1，以后若有更高版本规格推出，可以改填 "2, 3" 等，官方发布的 room_ver 版本，将在本公号维持后向兼容。

room_name 是聊天室名称，当输入类似 "换房间 旅游服务" 指令时，会用到 room_name。

system_role 指定聊天机器人将要扮演的角色。

magic_rules 定义聊天指令触发词，常规聊天内容通常不会以 `<触发词> `（即，一个触发词后跟空格）的格式开头，所以，与机器人正常一问一答聊天与给机器人下发特定指令之间有明显差别，系统能准确区分他们。

触发词就像一句魔咒，你喊一声，魔咒匹配后，机器人随即执行你预设的指令。如上面例子，我们定义了一个触发词 `"介绍"`，触发后，系统最终向 chatGPT 发送在 prompts 预定义的一句问话。magic_rules 配置项定义触发词的参数规格，比如上面例子，触发词 "介绍" 只定义一个参数 "景点名"，用户输入 `"介绍 广东梁启超故居"`，系统就自动识别出 `"景点名"` 参数，取值 `"广东梁启超故居"`，然后这个值将赋给 `{where}` 局部变量，以便 prompt 可以引用它来构造问答的上下文信息。

prompts 定义各触发词所对应的 prompt 字串，本例子中，将 `{where}` 变量代入，输入`"介绍 广东梁启超故居"` 后产生的 prompt 字串就是 “我提供一个景点名称，你将介绍该景点的特色、人文背景、历史典故，简短些。请介绍景点：广东梁启超故居。” 

hint_magics 罗列可打印输出的触发词列表，在用户输入 `"?"` 后打印的帮助信息中显示。本例打印信息如下：

```
当前房间：旅游服务

当前指令：
  介绍 景点名
```

在 magic_rules 中定义触发词都有捕获并触发动作的能力，但并不是所有触发词都在 hint_magics 列出，未列出的触发词缺少提示（即，用户输入 `"？"` 后不列该触发词），这类触发词很像咒语，普通人不知道咋用，其用法被隐藏了，只有修成大法的人才用得出来。

一个触发词可以带一个或多个参数，上述 `"介绍 景点名"` 是单参数格式，触发词与参数之间，以及参数与参数之间要求用空格分隔。除了空格，还可以用逗号或句号分隔。
